version: 2.1

orbs:
  statie:
    orbs:
      node: circleci/node@0.0.8
    jobs:
      setup:
        executor: node/default
        steps:
          - checkout
          - node/install-package-manager:
              npm: true
          - node/with-cache:
              cache-key: statie/package.json
              steps:
                - run: cd statie && sudo npm install -g
                - run: which get

jobs:
  setup-environment:
      docker:
        - image: circleci/node:11
      steps:
        - checkout
        - restore_cache:
            key: my-state
            paths: ~/my-state

workflows:
  push:
    jobs:
      - setup-environment
      - statie/setup